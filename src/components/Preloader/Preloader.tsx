import  { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import { motion } from 'framer-motion';

const Preloader = () => {
 const svgRef = useRef<SVGSVGElement>(null); 

  useEffect(() => {
    const paths = svgRef?.current?.querySelectorAll('path'); 

    paths?.forEach((path, i) => {
      const length = path.getTotalLength();  

      
      gsap.set(path, {
        strokeDasharray: length,
        strokeDashoffset: length,
        stroke: "#fff", 
        strokeWidth: 5,
        fill: "none",    
      });

    
      gsap.to(path, {
        strokeDashoffset: 0,
        duration: 2 + i * 0.5,  
        ease: "power1.inOut",
        repeat: -1, 
        yoyo: true, 
      });
    });
  }, []);

  return (
    <motion.div className="h-screen w-screen flex justify-center items-center bg-gray-900/50 backdrop-blur-xl">
      <motion.svg
       className={"w-64 h-64"}
        ref={svgRef}
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        width="264.000000pt"
        height="300.000000pt"
        viewBox="0 0 264.000000 300.000000"
        preserveAspectRatio="xMidYMid meet"
      >
        <g
          transform="translate(0.000000,300.000000) scale(0.100000,-0.100000)"
          fill="#000000"
          stroke="none"
        >
          <path
            d="M2120 2926 c-25 -6 -108 -52 -185 -101 -366 -234 -632 -405 -650
-418 -17 -13 -12 -13 45 -5 89 13 455 2 562 -17 164 -29 277 -85 314 -158 18
-33 117 -300 153 -409 14 -43 28 -68 37 -68 13 0 15 67 12 513 -3 506 -3 512
-25 557 -27 53 -75 94 -129 109 -49 14 -77 13 -134 -3z m158 -45 c20 -11 48
-36 62 -57 l25 -38 3 -425 c3 -483 4 -479 -68 -282 -51 140 -71 182 -111 222
-56 57 -206 110 -351 125 -37 4 -78 8 -90 9 -13 1 -93 3 -178 4 -181 1 -180
-2 -23 98 50 32 188 120 306 195 118 75 229 143 248 152 50 21 132 20 177 -3z"
          />
          <path
            d="M1132 2229 c-133 -14 -139 -19 -196 -145 -27 -60 -68 -165 -91 -234
l-43 -125 24 -6 c59 -17 586 -32 894 -25 430 9 506 16 496 43 -3 8 -9 27 -12
41 -11 45 -80 212 -128 312 -30 62 -55 99 -71 108 -53 27 -216 40 -505 40
-157 0 -322 -4 -368 -9z m780 -42 c37 -7 75 -20 84 -28 39 -32 189 -387 171
-405 -15 -15 -244 -24 -632 -24 -415 0 -658 9 -674 26 -10 10 30 145 66 224
12 25 33 72 47 105 15 32 34 67 42 76 16 18 104 36 209 43 135 8 621 -3 687
-17z"
          />
          <path
            d="M560 1944 c-96 -64 -230 -151 -298 -195 -138 -90 -184 -141 -203
-227 -10 -40 -10 -64 -1 -103 19 -83 62 -133 176 -207 55 -36 145 -94 198
-129 54 -35 99 -63 100 -63 2 0 2 89 0 197 -3 179 2 240 24 297 5 13 -2 16
-46 16 -62 0 -90 13 -90 43 0 43 35 119 68 148 28 25 41 29 91 29 l59 0 35
103 c19 56 44 126 56 155 11 28 17 52 13 51 -4 0 -86 -52 -182 -115z m104 -11
c-12 -48 -34 -107 -50 -130 -10 -17 -24 -23 -50 -23 -51 0 -100 -26 -126 -68
-25 -40 -48 -105 -48 -136 0 -27 49 -76 77 -76 12 0 26 -8 30 -17 4 -10 7
-100 5 -200 -2 -153 -5 -183 -18 -183 -15 0 -75 37 -238 145 -110 73 -148 125
-154 214 -5 74 14 119 75 177 48 46 467 321 491 323 9 1 10 -7 6 -26z"
          />
          <path
            d="M695 1431 c-38 -8 -55 -41 -55 -108 0 -66 20 -84 83 -72 91 18 145
11 195 -23 34 -23 56 -31 82 -29 46 3 80 26 80 54 0 35 -35 84 -67 91 -15 4
-73 24 -128 45 -112 43 -146 51 -190 42z m131 -55 c188 -66 229 -90 208 -124
-18 -27 -41 -26 -105 8 -57 29 -67 31 -150 29 -49 -2 -92 0 -96 4 -10 11 -4
79 9 94 16 19 56 16 134 -11z"
          />
          <path
            d="M2242 1424 c-30 -8 -82 -25 -116 -39 -34 -14 -70 -25 -78 -25 -22 0
-110 -99 -106 -119 9 -44 100 -53 158 -16 48 30 83 36 175 25 98 -10 105 -5
105 80 0 69 -14 100 -45 100 -7 0 -19 2 -27 4 -7 3 -37 -2 -66 -10z m98 -43
c13 -26 13 -74 -1 -88 -6 -6 -43 -9 -97 -6 -82 5 -90 3 -143 -25 -53 -28 -109
-34 -109 -12 0 21 54 70 93 84 23 8 71 26 107 40 81 31 135 34 150 7z"
          />
          <path
            d="M965 808 c0 -59 2 -64 30 -82 595 -385 1071 -684 1110 -698 121 -42
223 -7 278 97 20 37 22 57 25 282 l4 242 -156 3 c-146 3 -157 4 -178 26 -21
20 -23 32 -22 107 l1 85 -546 0 -546 0 0 -62z m1044 19 c5 -7 11 -39 13 -71 2
-49 8 -65 34 -95 l32 -36 138 -5 139 -5 3 -218 c2 -198 1 -220 -17 -255 -49
-96 -148 -129 -244 -81 -37 19 -320 197 -619 390 -57 37 -134 86 -172 109
-125 77 -301 193 -308 204 -13 19 -9 55 8 64 26 15 980 13 993 -1z"
          />
        </g>
      </motion.svg>
    </motion.div>
  );
};

export default Preloader;
